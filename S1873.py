def up():    global si    global sj    arr[si][sj]= "^"    if 0<=si-1<H and 0<=sj<W and arr[si-1][sj] ==".":        arr[si-1][sj] = "^"        arr[si][sj] = "."        si,sj=si-1,sjdef down():    global si    global sj    arr[si][sj]= "v"    if 0<=si+1<H and 0<=sj<W and arr[si+1][sj] ==".":        arr[si+1][sj] = "v"        arr[si][sj] = "."        si,sj=si+1,sjdef left():    global si    global sj    arr[si][sj]= "<"    if 0<=si<H and 0<=sj-1<W and arr[si][sj-1] ==".":        arr[si][sj-1] = "<"        arr[si][sj] = "."        si,sj=si,sj-1def right():    global si    global sj    arr[si][sj]= ">"    if 0<=si<H and 0<=sj+1<W and arr[si][sj+1] ==".":        arr[si][sj+1] = ">"        arr[si][sj] = "."        si,sj=si,sj+1def shoot():    di,dj=dict[arr[si][sj]]    a,b=si,sj    # 가다가 * 나 # 라면    while 0<=a+di<H and 0<=b+dj<W:        a,b=a+di,b+dj        if arr[a][b] == "#":            break        elif arr[a][b] == "*":            arr[a][b]="."            break        else:            continuedict={"^":(-1,0), "v":(1,0), "<":(0,-1), ">":(0,1)}T=int(input())for tc in range(1,T+1):    # 높이 H (행) , 너비 W (열)    H,W=map(int,input().split())    arr=[list(input()) for _ in range(H)]    N=int(input())    want=list(input())    # 현재 전차 위치    for i in range(H):        for j in range(W):            if arr[i][j]=="<" or arr[i][j]=="v" or arr[i][j]==">" or arr[i][j]=="^":                si,sj=i,j    for command in want:        if command == "U":            up()        elif command == "D":            down()        elif command == "L":            left()        elif command == "R":            right()        elif command == "S":            shoot()    print(f'#{tc}',"".join(arr[0]))    for row in arr[1:]:        print("".join(row))